"""
    @author Leonardo Rossi Le√£o / Rodrigo de Oliveira Neto
    @create november, 09, 2020
    @title: EPICS
"""

import threading
from pcaspy import SimpleServer, Driver

def aux(mux, inicio, fim):
    saida = "";
    for i in range(inicio, fim+1):
        saida += '{"mux": %d, "channel": %d, "position": 0, "level": "A"}, ' % (mux, i)
    return saida

class LocalServer():
    
    floor = {"01B": [{"mux": 14, "channel": 1, "position": 5, "level": "A"}, {"mux": 14, "channel": 2, "position": 5, "level": "B"}, {"mux": 14, "channel": 3, "position": 5, "level": "C"}, {"mux": 14, "channel": 4, "position": 0, "level": "A"}, {"mux": 14, "channel": 5, "position": 0, "level": "A"}, {"mux": 14, "channel": 6, "position": 0, "level": "A"}, {"mux": 14, "channel": 7, "position": 0, "level": "A"}, ],
             "02B": [{"mux": 14, "channel": 8, "position": 0, "level": "A"}, {"mux": 14, "channel": 9, "position": 0, "level": "A"}, {"mux": 14, "channel": 10, "position": 0, "level": "A"}, {"mux": 14, "channel": 11, "position": 0, "level": "A"}, {"mux": 14, "channel": 12, "position": 0, "level": "A"}, {"mux": 14, "channel": 13, "position": 0, "level": "A"}, {"mux": 14, "channel": 14, "position": 0, "level": "A"}],
             "03B": [{"mux": 17, "channel": 1, "position": 0, "level": "A"}, {"mux": 17, "channel": 2, "position": 0, "level": "A"}, {"mux": 17, "channel": 3, "position": 0, "level": "A"}],
             "04A": [{"mux": 23, "channel": 1, "position": 0, "level": "A"}, {"mux": 23, "channel": 2, "position": 0, "level": "A"}, {"mux": 23, "channel": 3, "position": 0, "level": "A"}, {"mux": 23, "channel": 4, "position": 0, "level": "A"}, {"mux": 23, "channel": 5, "position": 0, "level": "A"}, {"mux": 23, "channel": 6, "position": 0, "level": "A"}, {"mux": 23, "channel": 7, "position": 0, "level": "A"}, {"mux": 23, "channel": 8, "position": 0, "level": "A"}, {"mux": 24, "channel": 1, "position": 0, "level": "A"}, {"mux": 24, "channel": 2, "position": 0, "level": "A"}, {"mux": 24, "channel": 3, "position": 0, "level": "A"}, {"mux": 24, "channel": 4, "position": 0, "level": "A"}, {"mux": 24, "channel": 5, "position": 0, "level": "A"}, {"mux": 24, "channel": 6, "position": 0, "level": "A"}, {"mux": 24, "channel": 7, "position": 0, "level": "A"}, {"mux": 24, "channel": 8, "position": 0, "level": "A"}, {"mux": 24, "channel": 9, "position": 0, "level": "A"}, {"mux": 24, "channel": 10, "position": 0, "level": "A"}, {"mux": 24, "channel": 11, "position": 0, "level": "A"}, {"mux": 24, "channel": 12, "position": 0, "level": "A"}, {"mux": 24, "channel": 13, "position": 0, "level": "A"}, {"mux": 24, "channel": 14, "position": 0, "level": "A"}, {"mux": 24, "channel": 15, "position": 0, "level": "A"}, {"mux": 24, "channel": 16, "position": 0, "level": "A"}, {"mux": 28, "channel": 1, "position": 0, "level": "A"}, {"mux": 28, "channel": 2, "position": 0, "level": "A"}, {"mux": 28, "channel": 3, "position": 0, "level": "A"}, {"mux": 28, "channel": 4, "position": 0, "level": "A"}, {"mux": 28, "channel": 5, "position": 0, "level": "A"}, {"mux": 28, "channel": 6, "position": 0, "level": "A"}, {"mux": 28, "channel": 7, "position": 0, "level": "A"}, {"mux": 28, "channel": 8, "position": 0, "level": "A"}, {"mux": 28, "channel": 9, "position": 0, "level": "A"}, {"mux": 28, "channel": 10, "position": 0, "level": "A"}, {"mux": 28, "channel": 11, "position": 0, "level": "A"}, {"mux": 28, "channel": 12, "position": 0, "level": "A"}, {"mux": 28, "channel": 13, "position": 0, "level": "A"}, {"mux": 28, "channel": 14, "position": 0, "level": "A"}, {"mux": 28, "channel": 15, "position": 0, "level": "A"}, {"mux": 28, "channel": 16, "position": 0, "level": "A"}, {"mux": 29, "channel": 1, "position": 0, "level": "A"}, {"mux": 29, "channel": 2, "position": 0, "level": "A"}, {"mux": 29, "channel": 3, "position": 0, "level": "A"}, {"mux": 29, "channel": 4, "position": 0, "level": "A"}, {"mux": 29, "channel": 5, "position": 0, "level": "A"}, {"mux": 29, "channel": 6, "position": 0, "level": "A"}, {"mux": 29, "channel": 7, "position": 0, "level": "A"}, {"mux": 29, "channel": 8, "position": 0, "level": "A"}, {"mux": 29, "channel": 9, "position": 0, "level": "A"}, {"mux": 29, "channel": 10, "position": 0, "level": "A"}, {"mux": 29, "channel": 11, "position": 0, "level": "A"}, {"mux": 29, "channel": 12, "position": 0, "level": "A"}, {"mux": 29, "channel": 13, "position": 0, "level": "A"}, {"mux": 29, "channel": 14, "position": 0, "level": "A"}, {"mux": 29, "channel": 15, "position": 0, "level": "A"}, {"mux": 29, "channel": 16, "position": 0, "level": "A"}],
             "04B": [{"mux": 17, "channel": 4, "position": 0, "level": "A"}, {"mux": 17, "channel": 5, "position": 0, "level": "A"}, {"mux": 17, "channel": 6, "position": 0, "level": "A"}, {"mux": 17, "channel": 7, "position": 0, "level": "A"}, {"mux": 17, "channel": 8, "position": 0, "level": "A"}, {"mux": 17, "channel": 9, "position": 0, "level": "A"}, {"mux": 17, "channel": 10, "position": 0, "level": "A"}, {"mux": 17, "channel": 11, "position": 0, "level": "A"}, {"mux": 17, "channel": 12, "position": 0, "level": "A"}, {"mux": 15, "channel": 1, "position": 0, "level": "A"}, {"mux": 15, "channel": 2, "position": 0, "level": "A"}, {"mux": 15, "channel": 3, "position": 0, "level": "A"}, {"mux": 15, "channel": 4, "position": 0, "level": "A"}, {"mux": 15, "channel": 5, "position": 0, "level": "A"}, {"mux": 15, "channel": 6, "position": 0, "level": "A"}, {"mux": 15, "channel": 7, "position": 0, "level": "A"}, {"mux": 15, "channel": 8, "position": 0, "level": "A"}, {"mux": 15, "channel": 9, "position": 0, "level": "A"}, {"mux": 15, "channel": 10, "position": 0, "level": "A"}, {"mux": 15, "channel": 11, "position": 0, "level": "A"}, {"mux": 15, "channel": 12, "position": 0, "level": "A"}, {"mux": 15, "channel": 13, "position": 0, "level": "A"}, {"mux": 15, "channel": 14, "position": 0, "level": "A"}, {"mux": 15, "channel": 15, "position": 0, "level": "A"}, {"mux": 15, "channel": 16, "position": 0, "level": "A"}, {"mux": 16, "channel": 1, "position": 0, "level": "A"}, {"mux": 16, "channel": 2, "position": 0, "level": "A"}, {"mux": 16, "channel": 3, "position": 0, "level": "A"}, {"mux": 16, "channel": 4, "position": 0, "level": "A"}, {"mux": 16, "channel": 5, "position": 0, "level": "A"}, {"mux": 16, "channel": 6, "position": 0, "level": "A"}, {"mux": 16, "channel": 7, "position": 0, "level": "A"}, {"mux": 16, "channel": 8, "position": 0, "level": "A"}, {"mux": 16, "channel": 9, "position": 0, "level": "A"}, {"mux": 16, "channel": 10, "position": 0, "level": "A"}, {"mux": 16, "channel": 11, "position": 0, "level": "A"}, {"mux": 16, "channel": 12, "position": 0, "level": "A"}, {"mux": 16, "channel": 13, "position": 0, "level": "A"}],
             "05B": [{"mux": 1, "channel": 7, "position": 0, "level": "A"}, {"mux": 2, "channel": 1, "position": 0, "level": "A"}, {"mux": 2, "channel": 2, "position": 0, "level": "A"}, {"mux": 2, "channel": 3, "position": 0, "level": "A"}, {"mux": 2, "channel": 4, "position": 0, "level": "A"}, {"mux": 2, "channel": 5, "position": 0, "level": "A"}, {"mux": 2, "channel": 6, "position": 0, "level": "A"}, ],
             "06B": [{"mux": 1, "channel": 8, "position": 0, "level": "A"}, {"mux": 1, "channel": 1, "position": 0, "level": "A"}, {"mux": 1, "channel": 2, "position": 0, "level": "A"}, {"mux": 1, "channel": 3, "position": 0, "level": "A"}, {"mux": 1, "channel": 4, "position": 0, "level": "A"}, {"mux": 1, "channel": 5, "position": 0, "level": "A"}, {"mux": 1, "channel": 6, "position": 0, "level": "A"}, ],
             "07B": [{"mux": 2, "channel": 7, "position": 0, "level": "A"}, {"mux": 2, "channel": 8, "position": 0, "level": "A"}, {"mux": 2, "channel": 9, "position": 0, "level": "A"}, {"mux": 2, "channel": 10, "position": 0, "level": "A"}, {"mux": 2, "channel": 11, "position": 0, "level": "A"}, {"mux": 2, "channel": 12, "position": 0, "level": "A"}, {"mux": 2, "channel": 13, "position": 0, "level": "A"}],
             "08B": [{"mux": 3, "channel": 1, "position": 0, "level": "A"}, {"mux": 3, "channel": 2, "position": 0, "level": "A"}, {"mux": 3, "channel": 3, "position": 0, "level": "A"}],
             "09B_LINAC": [{"mux": 3, "channel": 4, "position": 0, "level": "A"}, {"mux": 3, "channel": 5, "position": 0, "level": "A"}, {"mux": 3, "channel": 6, "position": 0, "level": "A"}, {"mux": 3, "channel": 7, "position": 0, "level": "A"}, {"mux": 3, "channel": 8, "position": 0, "level": "A"}, {"mux": 3, "channel": 9, "position": 0, "level": "A"}, {"mux": 3, "channel": 10, "position": 0, "level": "A"}, {"mux": 3, "channel": 11, "position": 0, "level": "A"}, {"mux": 3, "channel": 12, "position": 0, "level": "A"}, {"mux": 3, "channel": 13, "position": 0, "level": "A"}, {"mux": 3, "channel": 14, "position": 0, "level": "A"}, {"mux": 3, "channel": 15, "position": 0, "level": "A"}, {"mux": 3, "channel": 16, "position": 0, "level": "A"}, {"mux": 4, "channel": 1, "position": 0, "level": "A"}, {"mux": 4, "channel": 2, "position": 0, "level": "A"}, {"mux": 4, "channel": 3, "position": 0, "level": "A"}, {"mux": 4, "channel": 4, "position": 0, "level": "A"}, {"mux": 4, "channel": 5, "position": 0, "level": "A"}, {"mux": 4, "channel": 6, "position": 0, "level": "A"}, {"mux": 4, "channel": 7, "position": 0, "level": "A"}, {"mux": 4, "channel": 8, "position": 0, "level": "A"}, {"mux": 4, "channel": 9, "position": 0, "level": "A"}, {"mux": 4, "channel": 10, "position": 0, "level": "A"}, {"mux": 4, "channel": 11, "position": 0, "level": "A"}, {"mux": 4, "channel": 12, "position": 0, "level": "A"}, {"mux": 4, "channel": 13, "position": 0, "level": "A"}, {"mux": 4, "channel": 14, "position": 0, "level": "A"}, {"mux": 4, "channel": 15, "position": 0, "level": "A"}, {"mux": 4, "channel": 16, "position": 0, "level": "A"}, {"mux": 5, "channel": 1, "position": 0, "level": "A"}, {"mux": 5, "channel": 2, "position": 0, "level": "A"}, {"mux": 5, "channel": 3, "position": 0, "level": "A"}, {"mux": 5, "channel": 4, "position": 0, "level": "A"}, {"mux": 5, "channel": 5, "position": 0, "level": "A"}, {"mux": 5, "channel": 6, "position": 0, "level": "A"}, {"mux": 5, "channel": 7, "position": 0, "level": "A"}, {"mux": 5, "channel": 8, "position": 0, "level": "A"}, {"mux": 5, "channel": 9, "position": 0, "level": "A"}],
             "10B_LINAC": [{"mux": 5, "channel": 10, "position": 0, "level": "A"}, {"mux": 5, "channel": 11, "position": 0, "level": "A"}, {"mux": 5, "channel": 12, "position": 0, "level": "A"}, {"mux": 5, "channel": 13, "position": 0, "level": "A"}, {"mux": 5, "channel": 14, "position": 0, "level": "A"}, {"mux": 5, "channel": 15, "position": 0, "level": "A"}, {"mux": 5, "channel": 16, "position": 0, "level": "A"}],
             "11B": [{"mux": 6, "channel": 1, "position": 0, "level": "A"}, {"mux": 6, "channel": 2, "position": 0, "level": "A"}, {"mux": 6, "channel": 3, "position": 0, "level": "A"}, {"mux": 6, "channel": 4, "position": 0, "level": "A"}, {"mux": 6, "channel": 5, "position": 0, "level": "A"}, {"mux": 6, "channel": 6, "position": 0, "level": "A"}, {"mux": 6, "channel": 7, "position": 0, "level": "A"}],
             "12B": [{"mux": 6, "channel": 8, "position": 0, "level": "A"}, {"mux": 6, "channel": 9, "position": 0, "level": "A"}, {"mux": 6, "channel": 10, "position": 0, "level": "A"}, {"mux": 6, "channel": 11, "position": 0, "level": "A"}, {"mux": 6, "channel": 12, "position": 0, "level": "A"}, {"mux": 6, "channel": 13, "position": 0, "level": "A"}, {"mux": 6, "channel": 14, "position": 0, "level": "A"}],
             "13B": [{"mux": 7, "channel": 1, "position": 0, "level": "A"}, {"mux": 7, "channel": 2, "position": 0, "level": "A"}, {"mux": 7, "channel": 3, "position": 0, "level": "A"}],
             "14B": [{"mux": 7, "channel": 4, "position": 0, "level": "A"}, {"mux": 7, "channel": 5, "position": 0, "level": "A"}, {"mux": 7, "channel": 6, "position": 0, "level": "A"}, {"mux": 7, "channel": 7, "position": 0, "level": "A"}, {"mux": 7, "channel": 8, "position": 0, "level": "A"}, {"mux": 7, "channel": 9, "position": 0, "level": "A"}, {"mux": 7, "channel": 10, "position": 0, "level": "A"}, {"mux": 7, "channel": 11, "position": 0, "level": "A"}, {"mux": 7, "channel": 12, "position": 0, "level": "A"}, {"mux": 7, "channel": 13, "position": 0, "level": "A"}, {"mux": 7, "channel": 14, "position": 0, "level": "A"}, {"mux": 7, "channel": 15, "position": 0, "level": "A"}, {"mux": 7, "channel": 16, "position": 0, "level": "A"}, {"mux": 8, "channel": 1, "position": 0, "level": "A"}, {"mux": 8, "channel": 2, "position": 0, "level": "A"}, {"mux": 8, "channel": 3, "position": 0, "level": "A"}, {"mux": 8, "channel": 4, "position": 0, "level": "A"}, {"mux": 8, "channel": 5, "position": 0, "level": "A"}, {"mux": 8, "channel": 6, "position": 0, "level": "A"}, {"mux": 8, "channel": 7, "position": 0, "level": "A"}, {"mux": 8, "channel": 8, "position": 0, "level": "A"}, {"mux": 8, "channel": 9, "position": 0, "level": "A"}, {"mux": 8, "channel": 10, "position": 0, "level": "A"}, {"mux": 8, "channel": 11, "position": 0, "level": "A"}, {"mux": 8, "channel": 12, "position": 0, "level": "A"}, {"mux": 8, "channel": 13, "position": 0, "level": "A"}, {"mux": 8, "channel": 14, "position": 0, "level": "A"}, {"mux": 8, "channel": 15, "position": 0, "level": "A"}, {"mux": 8, "channel": 16, "position": 0, "level": "A"}, {"mux": 9, "channel": 1, "position": 0, "level": "A"}, {"mux": 9, "channel": 2, "position": 0, "level": "A"}, {"mux": 9, "channel": 3, "position": 0, "level": "A"}, {"mux": 9, "channel": 4, "position": 0, "level": "A"}, {"mux": 9, "channel": 5, "position": 0, "level": "A"}, {"mux": 9, "channel": 6, "position": 0, "level": "A"}, {"mux": 9, "channel": 7, "position": 0, "level": "A"}, {"mux": 9, "channel": 8, "position": 0, "level": "A"}, {"mux": 9, "channel": 9, "position": 0, "level": "A"}],
             "15B": [{"mux": 9, "channel": 10, "position": 0, "level": "A"}, {"mux": 9, "channel": 11, "position": 0, "level": "A"}, {"mux": 9, "channel": 12, "position": 0, "level": "A"}, {"mux": 9, "channel": 13, "position": 0, "level": "A"}, {"mux": 9, "channel": 14, "position": 0, "level": "A"}, {"mux": 9, "channel": 15, "position": 0, "level": "A"}, {"mux": 9, "channel": 16, "position": 0, "level": "A"}],
             "16B": [{"mux": 10, "channel": 1, "position": 0, "level": "A"}, {"mux": 10, "channel": 2, "position": 0, "level": "A"}, {"mux": 10, "channel": 3, "position": 0, "level": "A"}, {"mux": 10, "channel": 4, "position": 0, "level": "A"}, {"mux": 10, "channel": 5, "position": 0, "level": "A"}, {"mux": 10, "channel": 6, "position": 0, "level": "A"}, {"mux": 10, "channel": 7, "position": 0, "level": "A"}],
             "17B": [{"mux": 10, "channel": 8, "position": 0, "level": "A"}, {"mux": 10, "channel": 9, "position": 0, "level": "A"}, {"mux": 10, "channel": 10, "position": 0, "level": "A"}, {"mux": 10, "channel": 11, "position": 0, "level": "A"}, {"mux": 10, "channel": 12, "position": 0, "level": "A"}, {"mux": 10, "channel": 13, "position": 0, "level": "A"}, {"mux": 10, "channel": 14, "position": 0, "level": "A"}],
             "18B": [{"mux": 11, "channel": 1, "position": 0, "level": "A"}, {"mux": 11, "channel": 2, "position": 0, "level": "A"}, {"mux": 11, "channel": 3, "position": 0, "level": "A"}],
             "19B": [{"mux": 11, "channel": 4, "position": 0, "level": "A"}, {"mux": 11, "channel": 5, "position": 0, "level": "A"}, {"mux": 11, "channel": 6, "position": 0, "level": "A"}, {"mux": 11, "channel": 7, "position": 0, "level": "A"}, {"mux": 11, "channel": 8, "position": 0, "level": "A"}, {"mux": 11, "channel": 9, "position": 0, "level": "A"}, {"mux": 11, "channel": 10, "position": 0, "level": "A"}, {"mux": 11, "channel": 11, "position": 0, "level": "A"}, {"mux": 11, "channel": 12, "position": 0, "level": "A"}, {"mux": 11, "channel": 13, "position": 0, "level": "A"}, {"mux": 11, "channel": 14, "position": 0, "level": "A"}, {"mux": 11, "channel": 15, "position": 0, "level": "A"}, {"mux": 11, "channel": 16, "position": 0, "level": "A"}, {"mux": 12, "channel": 1, "position": 0, "level": "A"}, {"mux": 12, "channel": 2, "position": 0, "level": "A"}, {"mux": 12, "channel": 3, "position": 0, "level": "A"}, {"mux": 12, "channel": 4, "position": 0, "level": "A"}, {"mux": 12, "channel": 5, "position": 0, "level": "A"}, {"mux": 12, "channel": 6, "position": 0, "level": "A"}, {"mux": 12, "channel": 7, "position": 0, "level": "A"}, {"mux": 12, "channel": 8, "position": 0, "level": "A"}, {"mux": 12, "channel": 9, "position": 0, "level": "A"}, {"mux": 12, "channel": 10, "position": 0, "level": "A"}, {"mux": 12, "channel": 11, "position": 0, "level": "A"}, {"mux": 12, "channel": 12, "position": 0, "level": "A"}, {"mux": 12, "channel": 13, "position": 0, "level": "A"}, {"mux": 12, "channel": 14, "position": 0, "level": "A"}, {"mux": 12, "channel": 15, "position": 0, "level": "A"}, {"mux": 12, "channel": 16, "position": 0, "level": "A"}, {"mux": 13, "channel": 1, "position": 0, "level": "A"}, {"mux": 13, "channel": 2, "position": 0, "level": "A"}, {"mux": 13, "channel": 3, "position": 0, "level": "A"}, {"mux": 13, "channel": 4, "position": 0, "level": "A"}, {"mux": 13, "channel": 5, "position": 0, "level": "A"}, {"mux": 13, "channel": 6, "position": 0, "level": "A"}, {"mux": 13, "channel": 7, "position": 0, "level": "A"}, {"mux": 13, "channel": 8, "position": 0, "level": "A"}, {"mux": 13, "channel": 9, "position": 0, "level": "A"}],
             "20B": [{"mux": 13, "channel": 10, "position": 0, "level": "A"}, {"mux": 13, "channel": 11, "position": 0, "level": "A"}, {"mux": 13, "channel": 12, "position": 0, "level": "A"}, {"mux": 13, "channel": 13, "position": 0, "level": "A"}, {"mux": 13, "channel": 14, "position": 0, "level": "A"}, {"mux": 13, "channel": 15, "position": 0, "level": "A"}, {"mux": 13, "channel": 16, "position": 0, "level": "A"}]        
            }
    
    locker = {"Eixo58": [{"mux": 27, "channel": 1, "position": 0, "level": "A"}, {"mux": 27, "channel": 2, "position": 0, "level": "A"}, {"mux": 27, "channel": 3, "position": 0, "level": "A"}, {"mux": 27, "channel": 4, "position": 0, "level": "A"}, {"mux": 27, "channel": 5, "position": 0, "level": "A"}, {"mux": 27, "channel": 6, "position": 0, "level": "A"}, {"mux": 27, "channel": 7, "position": 0, "level": "A"}, {"mux": 27, "channel": 8, "position": 0, "level": "A"}, {"mux": 27, "channel": 9, "position": 0, "level": "A"}, {"mux": 27, "channel": 10, "position": 0, "level": "A"}, {"mux": 27, "channel": 11, "position": 0, "level": "A"}, {"mux": 27, "channel": 12, "position": 0, "level": "A"}]}
    
    def __init__(self):
        super(LocalServer, self).__init__()
        self.prefix = "CONCRETE"
        self.pvdb = ""
    
    def run(self):
        server = SimpleServer()
        server.createPV(self.prefix, self.pvdb)
        while True:
            server.process(0.1)
        
class MyDriver(Driver):
    
    def __init__(self):
        super(MyDriver, self).__init__()
        
    def updateData(self):
        self.setParam("PV", "value")
        self.updatePvs()